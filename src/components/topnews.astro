---
const posts = await Astro.glob("../pages/post/**/*.mdx");
---

<div class="wrapper max-w-6xl mx-auto text-white px-4">
  <div class="recent-posts p-2 pt-12">
    <div class="heading mb-6">
      <a href="/post">
        <h2 class="text-2xl font-semibold mb-1 hover:underline">Top News</h2>
      </a>
      <hr class="border-t border-indigo-600" />
    </div>
    <div class="horizontalbar grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_minmax(0,2fr)] gap-6 max-w-[1152px] mx-auto">
      {/* Left column - featured post */}
      <ul class="left">
        {
        posts
        .sort((a, b) => new Date(b.frontmatter.pubDate) - new Date(a.frontmatter.pubDate))
        .slice(0, 1)
        .map(post => (
        <li key={post.frontmatter.slug} class="mb-6 list-none">
          <a href={"/post/" + post.frontmatter.slug} class="block group">
            <img class="rounded-lg w-full mb-3" src={post.frontmatter.image} alt={post.frontmatter.title} />
            <p class="font-bold text-lg group-hover:text-indigo-400 transition">{post.frontmatter.title}</p>
            <p class="text-gray-400 my-2 text-sm">{post.frontmatter.description}</p>
            <p class="text-gray-500 text-xs mb-1">{post.frontmatter.excerpt}</p>
            <p class="font-light text-gray-400 text-sm">
              {post.frontmatter.pubDate} | Posted {post.frontmatter.pubTime}
            </p>
            <p class="text-gray-500 text-xs float-right mt-1">
              &#10711; {post.frontmatter.minutesRead} min read
            </p>
          </a>
        </li>
        ))
        }
      </ul>

      {/* Right column - smaller posts grid */}
      <ul class="right grid grid-cols-1 sm:grid-cols-2 gap-4 list-none">
        {
        posts
        .sort((a, b) => new Date(b.frontmatter.pubDate) - new Date(a.frontmatter.pubDate))
        .slice(1, 3)
        .map(post => (
        <li key={post.frontmatter.slug} class="mb-6">
          <a href={"/post/" + post.frontmatter.slug} class="block group">
            <img class="h-40 w-full object-cover rounded-lg mb-3" src={post.frontmatter.image}
              alt={post.frontmatter.title} />
            <p class="font-bold text-lg group-hover:text-indigo-400 transition">{post.frontmatter.title}</p>
            <p class="text-gray-400 my-2 text-sm">{post.frontmatter.description}</p>
            <p class="text-gray-500 text-xs mb-1">{post.frontmatter.excerpt}</p>
            <p class="font-light text-gray-400 text-sm">
              {post.frontmatter.pubDate} | Posted {post.frontmatter.pubTime}
            </p>
            <p class="text-gray-500 text-xs float-right mt-1">
              &#10711; {post.frontmatter.minutesRead} min read
            </p>
          </a>
        </li>
        ))
        }
      </ul>
    </div>
  </div>
</div>